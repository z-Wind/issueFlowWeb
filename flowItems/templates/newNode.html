{% extends 'base.html' %}

{% block FormContent %}
<div class="row">
    <div class="col-md-4">
        <form id = "id_input_form" action="" method="post">{% csrf_token %}
            <table class="table table-bordered">
                <caption>建立節點</caption>
                {{f.as_table}}
            </table>
            <input type="hidden" name="ok" value="yes">
            <input type="submit" class="btn btn-default" value="提交" onclick="return checkForm('#id_input_form', ['pre_item', 'ph'])">
        </form>
    </div>
    <div class="col-md-4">
        <div id="id_itemList" class="col-md-4 rightList" style="display: none;">
            <table style="width: 150px">
                <caption style="text-align: left">已有節點</caption>
                <tr>
                    <td>
                        <select size=24 id="id_itemListSel">
                        </select>
                        <select id="id_itemListTemp" style="display: none;">
                            {% for item in items %}
                                <option value={{item.id}}>{{item.ph}}</option>
                            {% endfor %}
                        </select>
                    </td>
                </tr>
            </table>
        </div>
    </div>
</div>
{% endblock %}

{% block script %}
<script>
    $('#id_ph').keyup(function() {
        $('#id_itemList').slideDown('middle');
        var typing = $.trim($('#id_ph').val());
        updatelist('#id_itemListTemp', '#id_itemListSel', typing);
    });
    $('#id_itemListSel').on('click', 'option', function() {
        var selText = $(this).text();
        $('#id_ph').val(selText);
        updatelist('#id_itemListTemp', '#id_itemListSel', selText);
        $('#id_itemList').slideUp('middle');
    });
</script>
{% endblock %}
